!function(e){const t=e=>null!=e&&void 0!==e,n=(e,t)=>e in t,o=e=>"function"==typeof e,r=e=>e&&"object"==typeof e&&!Array.isArray(e),s={},c=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(r(e)&&r(n))for(const t in n)n.hasOwnProperty(t)&&r(n[t])?(e[t]||Object.assign(e,{[t]:{}}),c(e[t],n[t])):Object.assign(e,{[t]:n[t]});return c(e,...t)};(()=>{const n=document.querySelectorAll(".rating-guide .tag");if(t(n))for(let t=0;t<n.length;t++)n[t].innerText=e[t]})(),(()=>{const e=document.getElementById("form360"),t=document.getElementById("submit-review"),r=document.getElementById("save-draft"),i=()=>{let t={};const o=e.elements,r=e.querySelectorAll(".form-input");for(let e=0;e<r.length;e++){const s=r[e].name;let i=o[s].value;if("radio"===r[e].type&&(i=""===i?0:parseInt(i)),s.endsWith("]")){const e=s.split("[")[0];if(n(e,t)){let n=t[e];if(!Array.isArray(n))continue;n.push(i),t[e]=n}else t[e]=[i];continue}if(n(s,t))continue;if(s.indexOf(".")<1){t[s]=i;continue}const l=s.split(".").reduceRight((e,t)=>({[t]:e}),i);t=c(t,l)}return t},l=(c,i)=>{t.disabled=!0,r.disabled=!0,i["submission-type"]=c,((e,t,r,c,i,l,a,u)=>{n(e,s)&&[1,2,3].includes(s[e].status)&&s[e].abort(),s[e]=new XMLHttpRequest,s[e].withCredentials=!0,s[e].addEventListener("progress",function(e){o(u)&&u(e)}),s[e].addEventListener("load",function(e){o(i)&&i(e)}),s[e].addEventListener("error",function(e){o(l)&&l(e)}),s[e].addEventListener("abort",function(e){o(a)&&a(e)}),s[e].open(t,r),s[e].setRequestHeader("Content-Type","application/json"),s[e].send(c)})("r360",e.getAttribute("method"),e.getAttribute("action"),JSON.stringify(i),function(e){console.log(e),t.disabled=!1,r.disabled=!1},function(e){console.log(e),t.disabled=!1,r.disabled=!1},function(e){console.log(e),t.disabled=!1,r.disabled=!1})};t.onclick=function(e){return e.preventDefault(),!!confirm("Are you sure you want to submit your final review now?")&&(l("final",i()),!1)},r.onclick=function(e){return e.preventDefault(),!!confirm("Are you sure you want to submit your draft now?")&&(l("draft",i()),!1)}})(),(()=>{let e=document.querySelectorAll(".tabs li"),t=document.querySelectorAll(".tab-content"),n=function(e){return[...e.parentElement.children].indexOf(e)};e.forEach(function(o){o.addEventListener("click",function(){e.forEach(function(e){e.classList.remove("is-active")}),t.forEach(function(e){e.classList.remove("is-active")}),o.classList.add("is-active"),function(e){t[n(e)].classList.add("is-active")}(o)})}),e[0].click()})(),(()=>{const e=document.getElementsByClassName("btn-up-down")[0],t=e.getElementsByClassName("fas")[0];e.addEventListener("click",function(){t.classList.contains("fa-caret-down")?(()=>{const e=document.scrollingElement||document.body;e.scrollTop=e.scrollHeight})():(document.scrollingElement||document.body).scrollTop=0}),window.onscroll=function(){document.body.scrollTop>1e3||document.documentElement.scrollTop>1e3?(t.classList.remove("fa-caret-down"),t.classList.add("fa-caret-up")):(t.classList.remove("fa-caret-up"),t.classList.add("fa-caret-down"))}})(),(()=>{const n=document.getElementsByClassName("rating-input"),o=e=>{if(!(e=>e.hasAttribute("data-parent"))(e))return;const n=e.closest("tbody"),o=e.getAttribute("data-parent");let r=n.querySelector(".score-"+o);if(!t(r))return;if(r=r.querySelector(".score-subtotal"),!t(r))return;const s=n.querySelectorAll(".ch-"+o);let c=0;for(let e=0;e<s.length;e++){let t=s[e].querySelector(".score").innerText;t.length&&(c+=parseFloat(t))}r.innerText=c.toFixed(2)},r=t=>{const n=t.closest("tbody"),o=n.querySelectorAll(".score");let r=0;for(let e=0;e<o.length;e++){let t=o[e].innerText;t.length&&(r+=parseFloat(t))}n.querySelector(".score-total").innerText=r.toFixed(2),n.querySelector(".score-rating").innerText=(t=>{switch(!0){case t<1.5:return e[0];case t>=1.5&&t<2.5:return e[1];case t>=2.5&&t<3.5:return e[2];case t>=3.5&&t<4.5:return e[3];case t>=4.5:return e[4];default:return""}})(r)};for(let e=0;e<n.length;e++)n[e].addEventListener("change",function(){const e=this.closest("tr"),t=e.querySelector(".weight"),n=e.querySelector(".score"),s=this.value,c=t.innerText.replace(/[^0-9]/,"");n.innerText=(c/100*s).toFixed(2),o(e),r(e)},!1)})()}(ratings);
!function(e,t){const n=e=>{const n=e.closest("tbody"),o=n.querySelectorAll(".score");let r=0;for(let e=0;e<o.length;e++){let t=o[e].innerText;t.length&&(r+=parseFloat(t))}n.querySelector(".score-total").innerText=r.toFixed(2),n.querySelector(".score-rating").innerText=(e=>{switch(!0){case e<1.5:return t[0];case e>=1.5&&e<2.5:return t[1];case e>=2.5&&e<3.5:return t[2];case e>=3.5&&e<4.5:return t[3];case e>=4.5:return t[4];default:return""}})(r)},o=document.getElementsByClassName("rating-input"),r=t=>{const r=t=>{const o=t.closest("tr"),r=o.querySelector(".weight"),s=o.querySelector(".score"),i=t.value,c=r.innerText.replace(/[^0-9]/,"");s.innerText=(c/100*i).toFixed(2),(t=>{if(!(e=>e.hasAttribute("data-parent"))(t))return;const n=t.closest("tbody"),o=t.getAttribute("data-parent");let r=n.querySelector(".score-"+o);if(!e.elementExist(r))return;if(r=r.querySelector(".score-subtotal"),!e.elementExist(r))return;const s=n.querySelectorAll(".ch-"+o);let i=0;for(let e=0;e<s.length;e++){let t=s[e].querySelector(".score").innerText;t.length&&(i+=parseFloat(t))}r.innerText=i.toFixed(2)})(o),n(o)};if(e.elementExist(t))r(t);else for(let e=0;e<o.length;e++)o[e].checked&&r(o[e])};(()=>{const n=document.querySelectorAll(".rating-guide .tag");if(e.elementExist(n)){for(let e=0;e<n.length;e++)n[e].innerText=t[e];r()}})(),(()=>{const t=document.getElementById("form360"),n=document.getElementById("submit-review"),o=document.getElementById("save-draft"),r=()=>{let n={};const o=t.elements,r=t.querySelectorAll(".form-input");for(let t=0;t<r.length;t++){const s=r[t].name;let i=o[s].value;if("radio"===r[t].type&&(i=""===i?0:parseInt(i)),s.endsWith("]")){const t=s.split("[")[0];if(e.keyExist(t,n)){let e=n[t];if(!Array.isArray(e))continue;e.push(i),n[t]=e}else n[t]=[i];continue}if(e.keyExist(s,n))continue;if(s.indexOf(".")<1){n[s]=i;continue}const c=s.split(".").reduceRight((e,t)=>({[t]:e}),i);n=e.deepMerge(n,c)}return n},s=e=>{if(e)return n.disabled=!1,void(o.disabled=!1);n.disabled=!0,o.disabled=!0},i=(n,o)=>{s(!1),o.submission_type=n,e.call("r360",t.getAttribute("method"),t.getAttribute("action"),JSON.stringify(o),function(t){200===t.status?e.toast("Your review has been submitted successfully!","is-success"):e.toast(t.error.message,"is-danger"),s(!0)},function(t){e.toast("Your review submission did not complete successfully!","is-warning"),s(!0)},function(e){s(!0)})};n.onclick=function(t){return t.preventDefault(),t.stopPropagation(),e.overrideEvents("onClickOk",function(){i("final",r())}),e.dialog(!0,"Submit Review","Are you sure you want to submit your FINAL REVIEW now? Once you've submit, you no longer able to modify it.",[["ok","Yes"],["cancel","No"]]),!1},o.onclick=function(t){return t.preventDefault(),t.stopPropagation(),e.overrideEvents("onClickOk",function(){i("draft",r())}),e.dialog(!0,"Saving as Draft","Are you sure you want to submit your DRAFT REVIEW now?",[["ok","Yes"],["cancel","No"]]),!1}})(),(()=>{let e=document.querySelectorAll(".tabs li"),t=document.querySelectorAll(".tab-content"),n=function(e){return[...e.parentElement.children].indexOf(e)};e.forEach(function(o){o.addEventListener("click",function(){e.forEach(function(e){e.classList.remove("is-active")}),t.forEach(function(e){e.classList.remove("is-active")}),o.classList.add("is-active"),function(e){t[n(e)].classList.add("is-active")}(o)})}),e[0].click()})(),(()=>{const t=document.getElementsByClassName("btn-up-down")[0],n=t.getElementsByClassName("fas")[0];t.addEventListener("click",function(){n.classList.contains("fa-caret-down")?e.scrollToBottom():e.scrollToTop()}),window.onscroll=function(){document.body.scrollTop>1e3||document.documentElement.scrollTop>1e3?(n.classList.remove("fa-caret-down"),n.classList.add("fa-caret-up")):(n.classList.remove("fa-caret-up"),n.classList.add("fa-caret-down"))}})(),(()=>{for(let e=0;e<o.length;e++)o[e].addEventListener("change",function(){r(this)},!1)})()}(fc,ratings);